name: Release Module

on:
  push:
    branches:
      - main

jobs:
  fmt:
    uses: diegotony/gh-pipelines/.github/workflows/terraform-fmt.yml@main
  docs:
    needs: fmt
    uses: diegotony/gh-pipelines/.github/workflows/terraform-tfdocs.yml@main
  release:
    needs: docs
    uses: diegotony/gh-pipelines/.github/workflows/sm-release.yml@main
    secrets:
      token: ${{ secrets.GH_TOKEN }}
